function KeyboardInputManager(){this.events={},this.listen()}KeyboardInputManager.prototype.on=function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},KeyboardInputManager.prototype.emit=function(e,t){var n=this.events[e];n&&n.forEach((function(e){e(t)}))},KeyboardInputManager.prototype.listen=function(){var e=this,t={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3};document.addEventListener("keydown",(function(n){var i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey,o=t[n.which];i||(void 0!==o&&(n.preventDefault(),e.emit("move",o)),32===n.which&&e.restart.bind(e)(n))}));var n=document.querySelector(".retry-button");n.addEventListener("click",this.restart.bind(this)),n.addEventListener("touchend",this.restart.bind(this));var i=document.querySelector(".keep-playing-button");i.addEventListener("click",this.keepPlaying.bind(this)),i.addEventListener("touchend",this.keepPlaying.bind(this));var o=document.querySelector(".info-container");o.addEventListener("click",this.showInfo.bind(this)),o.addEventListener("touchend",this.showInfo.bind(this));var a,r,s=document.querySelector(".key-container");s.addEventListener("click",this.showKey.bind(this)),s.addEventListener("touchend",this.showKey.bind(this));var h=document.getElementsByClassName("game-container")[0];h.addEventListener("touchstart",(function(e){e.touches.length>1||(a=e.touches[0].clientX,r=e.touches[0].clientY,e.preventDefault())})),h.addEventListener("touchmove",(function(e){e.preventDefault()})),h.addEventListener("touchend",(function(t){if(!(t.touches.length>0)){var n=t.changedTouches[0].clientX-a,i=Math.abs(n),o=t.changedTouches[0].clientY-r,s=Math.abs(o);Math.max(i,s)>10&&e.emit("move",i>s?n>0?1:3:o>0?2:0)}}))},KeyboardInputManager.prototype.restart=function(e){e.preventDefault(),this.emit("restart")},KeyboardInputManager.prototype.keepPlaying=function(e){e.preventDefault(),this.emit("keepPlaying")},KeyboardInputManager.prototype.showInfo=function(e){e.preventDefault(),this.emit("showInfo")},KeyboardInputManager.prototype.hideInfo=function(e){e.preventDefault(),this.emit("hideInfo")},KeyboardInputManager.prototype.showKey=function(e){e.preventDefault(),this.emit("showKey")},KeyboardInputManager.prototype.hideKey=function(e){e.preventDefault(),this.emit("hideKey")};